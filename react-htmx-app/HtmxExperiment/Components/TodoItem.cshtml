@using HtmxExperiment.Models
@model Todo

<li id="todo-@Model.Id" hx-swap-oob='true' class="list-group-item d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
        <div class="drag-handle me-2" style="cursor: grab">
            <span style="font-size: 1.2em; color: #6c757d">⋮⋮</span>
        </div>
        <input class="sort-input" type="hidden" name="TodoIds" value="@Model.Id" />
        <div class="form-check">
            <input class="form-check-input"
                   type="checkbox"
                   checked="@(Model.Completed)"
                   hx-post
                   hx-page="index"
                   hx-page-handler="ToggleTodo"
                   hx-route-id="@Model.Id"
                   id="todo-checkbox-@Model.Id" />
            <label class="form-check-label @(Model.Completed ? "text-decoration-line-through text-muted" : "")"
                   for="todo-checkbox-@Model.Id">
                @Model.Text
            </label>
        </div>
    </div>
    <div class="btn-group btn-group-sm">
        <button class="btn btn-sm btn-outline-primary"
                hx-get
                hx-page="index"
                hx-page-handler="EditTodo"
                hx-route-id="@Model.Id"
                hx-target="#todo-@Model.Id"
                aria-label="Edit task"
                title="Edit">
            <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-sm btn-outline-danger"
                hx-post
                hx-page="index"
                hx-page-handler="DeleteTodo"
                hx-route-id="@Model.Id"
                aria-label="Delete task"
                title="Delete">
            <i class="bi bi-trash"></i>
        </button>
    </div>
</li>
