@using HtmxExperiment.Models
@model Todo

<li id="todo-@Model.Id" hx-swap-oob='true' class="list-group-item d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center flex-grow-1">
        <div class="me-2" style="cursor: not-allowed; opacity: 0.5">
            <span style="font-size: 1.2em; color: #6c757d">⋮⋮</span>
        </div>
        <input class="sort-input" type="hidden" name="TodoIds" value="@Model.Id" />
        <div class="form-check me-2">
            <input class="form-check-input"
                   type="checkbox"
                   checked="@(Model.Completed)"
                   disabled
                   id="todo-checkbox-@Model.Id" />
        </div>
        <div class="flex-grow-1">
            <form id="edit-input-form-@Model.Id"
                  hx-post
                  hx-page="index"
                  hx-page-handler="EditTodo"
                  hx-route-id="@Model.Id"
                  hx-include="#edit-input-@Model.Id"
                  aria-label="Save edit"
                  title="Save">
                <input type="text" 
                       class="form-control form-control-sm" 
                       name="editText" 
                       value="@Model.Text"
                       autofocus
                       id="edit-input-@Model.Id"
                       required />
            </form>
        </div>
    </div>
    <div class="btn-group btn-group-sm">
        <button class="btn btn-sm btn-outline-success"
                form="edit-input-form-@Model.Id"
                type="submit">
            <i class="bi bi-check"></i>
        </button>
        <button class="btn btn-sm btn-outline-secondary"
                hx-post
                hx-page="index"
                hx-page-handler="CancelEditTodo"
                hx-route-id="@Model.Id"
                aria-label="Cancel edit"
                title="Cancel">
            <i class="bi bi-x"></i>
        </button>
    </div>
</li>